webpackJsonp([1],{Cdkj:function(t,e){},NHnr:function(t,e,n){"use strict";function i(){return T++}function o(t){for(var e="",n=0;n<t.length;n++){var i=t[n],a="",r="";i.children&&i.children.length&&(a=o(i.children));for(var l in i.attr)i.attr[l].compileType&&"innerHTML"===i.attr[l].compileType?a=i.attr[l].value:r=r+" "+i.attr[l].name+'="'+i.attr[l].value+'"';e=e+"\r\n"+i.template.replace("{attr}",r).replace("{innerHTML}",a)}return e}function a(t,e){if(t.uid===e)return t;var n=void 0;if(t.children)for(var i=0;i<t.children.length;i++)if(n=a(t.children[i],e))return n}Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),l=n("zL8q"),s=n.n(l),c=(n("tvR6"),n("V8mf")),u=n.n(c),d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},m=n("VU/8")({name:"app"},d,!1,function(t){n("Xnq0")},null,null).exports,h=n("/ocq"),p=n("Dd8w"),f=n.n(p),v={name:"UiItem",props:{name:String},data:function(){return{}},created:function(){},computed:{},methods:{dragstart:function(t){var e=t.target.getAttribute("data-name");t.dataTransfer.setData("uiName",e)},drag:function(t){}}},g={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"ui-item",attrs:{draggable:"true","data-name":this.name},on:{dragstart:this.dragstart}},[this._v("\n    "+this._s(this.name)+"\n")])},staticRenderFns:[]},b={data:function(){return{}},created:function(){},computed:{},methods:{dragstart:function(t){t.dataTransfer.setData("info","button")},drag:function(t){}},components:{UiItem:n("VU/8")(v,g,!1,function(t){n("d5ui")},null,null).exports}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h4",{staticClass:"title"},[this._v("组件库")]),this._v(" "),e("ui-item",{attrs:{name:"Button"}}),this._v(" "),e("ui-item",{attrs:{name:"Form"}}),this._v(" "),e("ui-item",{attrs:{name:"FormItem"}}),this._v(" "),e("ui-item",{attrs:{name:"Input"}}),this._v(" "),e("ui-item",{attrs:{name:"FormItemInput"}})],1)},staticRenderFns:[]},y=n("VU/8")(b,x,!1,function(t){n("Cdkj")},null,null).exports,_={name:"RenderLayout",props:{components:{type:Object,default:{}}},render:function(t){return this.components.render(t)}},C=n("Zrlr"),k=n.n(C),D=n("wxAW"),w=n.n(D),M=n("NYxO"),T=1,R=function t(e){k()(this,t),this.uid=e,this.children=[],this.desc="拖拽安置面板",this.name="DropPanel",this.nickname="DropPanel",this.render=function(t){return this.initScript||(this.initScript=!0),t("Div",{domProps:{controlConfig:this},directives:[{name:"dropable",value:this}],class:{"soul-drop-panel":!0},on:{click:function(t){A.commit("hideRightClickMenu")}}},this.children.map(function(e){return e.render(t)}))},this.renderProd="",this.script=function(){},this.template="`<div {model} {slotName}>{slot}</div>`",this.type="Div"};r.default.use(M.a);var A=new M.a.Store({state:{editingAttr:{},components:new R(i()),code:"",rightClickMenuData:{}},getters:{editingAttr:function(t){return t.editingAttr},components:function(t){return t.components},code:function(t){return t.code},rightClickMenuData:function(t){return t.rightClickMenuData}},mutations:{setEditingAttr:function(t,e){t.rightClickMenuData={style:{display:"none"}},t.editingAttr=function(t){for(var e=t.target;!e.componentData;)e=e.parentNode;return e.componentData}(e)},setComponents:function(t,e){t.components=e},setCode:function(t,e){t.code=e},setRightClickMenu:function(t,e){var n=window.event.clientX,i=window.event.clientY-20;t.rightClickMenuData={style:{display:"block",left:n+"px",top:i+"px"},uid:e.componentData.uid}},hideRightClickMenu:function(t){t.rightClickMenuData={style:{display:"none"}}}},actions:{convertToCode:function(t){(0,t.commit)("setCode",function(t){return console.log(t),"<template>\n<div>\n"+o(t.children)+"\n</div>\n</template>"}(t.state.components))}}}),F=function(){function t(e,n){k()(this,t),this.uid=e,this.pid=n,this.name="Button",this.template="<el-button{attr}>{innerHTML}</el-button>",this.attr={name:{type:"text",compileType:"innerHTML",value:"提交",desc:"",name:"text"},type:{type:"select",name:"type",items:[{label:"primary",value:"primary"},{label:"ghost",value:"ghost"},{label:"dashed",value:"dashed"},{label:"text",value:"text"},{label:"info",value:"info"},{label:"success",value:"success"},{label:"warning",value:"warning"},{label:"error",value:"error"}],value:"primary",desc:"type of button"}}}return w()(t,[{key:"render",value:function(t){return t("el-button",{props:{type:this.attr.type.value,loading:!1},domProps:{componentData:this,innerHTML:this.attr.name.value},directives:[{name:"editable"}]})}}]),t}(),$=function(){function t(e,n){k()(this,t),this.uid=e,this.pid=n,this.name="Form",this.children=[],this.template="<el-form{attr}>{innerHTML}</el-form>",this.attr={labelWidth:{type:"text",value:"80px",name:"label-width"}}}return w()(t,[{key:"render",value:function(t){return t("el-form",{props:{labelWidth:this.attr.labelWidth.value},class:{"ui-item-box":!0},directives:[{name:"dropable",value:this},{name:"editable"}],domProps:{componentData:this}},this.children.map(function(e){return e.render(t)}))}}]),t}(),I=function(){function t(e,n){k()(this,t),this.uid=e,this.pid=n,this.name="FormItem",this.children=[],this.template="<el-form-item{attr}>{innerHTML}</el-form-item>",this.attr={label:{type:"text",value:"项目一",desc:"",name:"text"}}}return w()(t,[{key:"render",value:function(t){return t("el-form-item",{props:{label:this.attr.label.value},class:{"ui-item-box":!0},directives:[{name:"dropable",value:this},{name:"editable"}],domProps:{componentData:this}},this.children.map(function(e){return e.render(t)}))}}]),t}(),L=function(){function t(e,n){k()(this,t),this.uid=e,this.pid=n,this.name="FormItem",this.children=[],this.template="<el-input{attr}>{innerHTML}</el-input>",this.attr={type:{type:"select",name:"type",items:[{label:"text ",value:"text"},{label:"textarea",value:"textarea"}],value:"text",desc:"type of button"},"v-model":{type:"text",name:"v-model",value:""}}}return w()(t,[{key:"render",value:function(t){return t("el-input",{props:{type:this.attr.type.value},directives:[{name:"editable"}],domProps:{componentData:this}})}}]),t}(),P=function(){function t(e,n){k()(this,t),this.uid=e,this.pid=n,this.name="FormItem",this.children=[new L],this.template="<el-form-item{attr}>{innerHTML}</el-form-item>",this.attr={label:{type:"text",value:"项目一",desc:"",name:"text"}}}return w()(t,[{key:"render",value:function(t){return t("el-form-item",{props:{label:this.attr.label.value},class:{"ui-item-box":!0},directives:[{name:"dropable",value:this}],domProps:{componentData:this},nativeOn:{click:function(t){console.log(t),A.commit("setEditingAttr",t)}}},this.children.map(function(e){return e.render(t)}))}}]),t}(),V={Button:F,Form:$,FormItem:I,Input:L,FormItemInput:P},H={data:function(){return{}},created:function(){},computed:{components:function(){return this.$store.state.components}},methods:{show:function(){alert(1)},showCode:function(){this.$emit("showCode")}},components:{RenderLayout:_}},E={render:function(){var t=this.$createElement;return(this._self._c||t)("render-layout",{staticClass:"components-box show-border",attrs:{components:this.components},on:{click:this.show}})},staticRenderFns:[]},N=n("VU/8")(H,E,!1,function(t){n("uN/R")},null,null).exports,U={name:"",data:function(){return{form:{name:""}}},computed:{editingAttr:{get:function(){return this.$store.state.editingAttr},set:function(){console.log("haha")}}},methods:{},watch:{}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attr-editor-box"},[n("h4",[t._v("属性："+t._s(t.editingAttr.name))]),t._v(" "),n("el-form",{ref:"form",attrs:{"label-position":"left",model:t.form,"label-width":"70px",size:"small"}},t._l(t.editingAttr.attr,function(e,i){return n("div",["text"===e.type?n("el-form-item",{attrs:{label:e.name}},[n("el-input",{model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"config.value"}})],1):t._e(),t._v(" "),"select"===e.type?n("el-form-item",{attrs:{label:e.name}},[n("el-select",{model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"config.value"}},t._l(e.items,function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1):t._e()],1)}))],1)},staticRenderFns:[]},q=n("VU/8")(U,B,!1,function(t){n("uxqs")},null,null).exports,O={name:"",data:function(){return{codeDialogVisible:!1}},computed:f()({},Object(M.b)(["components","code","rightClickMenuData"])),methods:{showCode:function(){this.$store.dispatch("convertToCode"),this.codeDialogVisible=!0},hello:function(){console.log(this.$refs.test)},deleteComponent:function(){var t=this.rightClickMenuData.uid,e=a(this.components,t),n=a(this.components,e.pid);console.log(e,n);var i=n.children.indexOf(e);n.children.splice(i,1),this.$store.commit("hideRightClickMenu")}},components:{UiLibBox:y,AttrEditor:q,WorkBox:N,Test:{name:"Test",render:function(t){return t("h1",1)}}}},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{staticStyle:{height:"100%"}},[n("el-header",{staticClass:"header-box"},[n("el-button",{attrs:{type:"default"},on:{click:t.showCode}},[t._v("code")])],1),t._v(" "),n("el-container",{staticClass:"main-box"},[n("el-aside",{staticClass:"ul-lib-box-container",attrs:{width:"250px"}},[n("ui-lib-box")],1),t._v(" "),n("el-main",[n("work-box")],1),t._v(" "),n("el-aside",{staticClass:"attr-editor-container",attrs:{width:"250px"}},[n("attr-editor")],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"提示",visible:t.codeDialogVisible,width:"80%"},on:{"update:visible":function(e){t.codeDialogVisible=e}}},[n("pre",{attrs:{contenteditable:"true"}},[n("code",{directives:[{name:"highlight",rawName:"v-highlight",value:t.code,expression:"code"}],staticClass:"html"})]),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.codeDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.codeDialogVisible=!1}}},[t._v("确 定")])],1)]),t._v(" "),n("ul",{staticClass:"el-dropdown-menu el-popper right-click-menu",style:t.rightClickMenuData.style},[n("li",{staticClass:"el-dropdown-menu__item",on:{click:t.deleteComponent}},[t._v("删除")])])],1)},staticRenderFns:[]},Y=n("VU/8")(O,W,!1,function(t){n("YYmh")},"data-v-2fd03f01",null).exports;r.default.use(h.a);var j=new h.a({routes:[{path:"/",name:"Home",component:Y}]}),S=(n("eDDz"),{install:function(t,e){t.directive("dropable",{bind:function(t,e){t.ondragover=function(t){t.preventDefault()},t.ondrop=function(t){var n=t.dataTransfer.getData("uiName"),o=e.value.uid;e.value.children.push(new V[n](i(),o)),t.stopPropagation()}}}),t.directive("editable",{bind:function(t,e){t.onclick=function(t){t.stopPropagation(),console.log(t),A.commit("setEditingAttr",t)},t.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),A.commit("setRightClickMenu",t),!1}}})}});r.default.use(s.a),r.default.use(S),r.default.config.productionTip=!1,r.default.directive("highlight",{bind:function(t,e){t.textContent=e.value,u.a.highlightBlock(t)},componentUpdated:function(t,e){t.textContent=e.value,u.a.highlightBlock(t)}}),new r.default({el:"#app",router:j,store:A,template:"<App/>",components:{App:m}})},Xnq0:function(t,e){},YYmh:function(t,e){},d5ui:function(t,e){},eDDz:function(t,e){},tvR6:function(t,e){},"uN/R":function(t,e){},uxqs:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a00be897e38d6db9a4b1.js.map